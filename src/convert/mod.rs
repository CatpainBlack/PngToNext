use crate::primitives::rectangle::Rectangle;
use crate::png::Png;
use crate::png::PngError;

mod palette_entry;
mod palette;
mod process_impl;

pub trait PaletteEntry {
    fn as_8bit(&self) -> u8;
    fn as_9bit(&self) -> u16;
}

pub trait Palette {
    fn eight_bit_palette(&self) -> Vec<u8>;
    fn nine_bit_palette(&self) -> Vec<u16>;
}

pub trait Process {
    fn copy_rect(self, rect: Rectangle) -> Result<Png, PngError>;
}

pub const LAYER2_DEFAULT: &'static [u16; 256] = &[
    0x0000, 0x0101, 0x0102, 0x0103, 0x0004, 0x0105, 0x0106, 0x0107,
    0x0008, 0x0109, 0x010a, 0x010b, 0x000c, 0x010d, 0x010e, 0x010f,
    0x0010, 0x0111, 0x0112, 0x0113, 0x0014, 0x0115, 0x0116, 0x0117,
    0x0018, 0x0119, 0x011a, 0x011b, 0x001c, 0x011d, 0x011e, 0x011f,
    0x0020, 0x0121, 0x0122, 0x0123, 0x0024, 0x0125, 0x0126, 0x0127,
    0x0028, 0x0129, 0x012a, 0x012b, 0x002c, 0x012d, 0x012e, 0x012f,
    0x0030, 0x0131, 0x0132, 0x0133, 0x0034, 0x0135, 0x0136, 0x0137,
    0x0038, 0x0139, 0x013a, 0x013b, 0x003c, 0x013d, 0x013e, 0x013f,
    0x0040, 0x0141, 0x0142, 0x0143, 0x0044, 0x0145, 0x0146, 0x0147,
    0x0048, 0x0149, 0x014a, 0x014b, 0x004c, 0x014d, 0x014e, 0x014f,
    0x0050, 0x0151, 0x0152, 0x0153, 0x0054, 0x0155, 0x0156, 0x0157,
    0x0058, 0x0159, 0x015a, 0x015b, 0x005c, 0x015d, 0x015e, 0x015f,
    0x0060, 0x0161, 0x0162, 0x0163, 0x0064, 0x0165, 0x0166, 0x0167,
    0x0068, 0x0169, 0x016a, 0x016b, 0x006c, 0x016d, 0x016e, 0x016f,
    0x0070, 0x0171, 0x0172, 0x0173, 0x0074, 0x0175, 0x0176, 0x0177,
    0x0078, 0x0179, 0x017a, 0x017b, 0x007c, 0x017d, 0x017e, 0x017f,
    0x0080, 0x0181, 0x0182, 0x0183, 0x0084, 0x0185, 0x0186, 0x0187,
    0x0088, 0x0189, 0x018a, 0x018b, 0x008c, 0x018d, 0x018e, 0x018f,
    0x0090, 0x0191, 0x0192, 0x0193, 0x0094, 0x0195, 0x0196, 0x0197,
    0x0098, 0x0199, 0x019a, 0x019b, 0x009c, 0x019d, 0x019e, 0x019f,
    0x00a0, 0x01a1, 0x01a2, 0x01a3, 0x00a4, 0x01a5, 0x01a6, 0x01a7,
    0x00a8, 0x01a9, 0x01aa, 0x01ab, 0x00ac, 0x01ad, 0x01ae, 0x01af,
    0x00b0, 0x01b1, 0x01b2, 0x01b3, 0x00b4, 0x01b5, 0x01b6, 0x01b7,
    0x00b8, 0x01b9, 0x01ba, 0x01bb, 0x00bc, 0x01bd, 0x01be, 0x01bf,
    0x00c0, 0x01c1, 0x01c2, 0x01c3, 0x00c4, 0x01c5, 0x01c6, 0x01c7,
    0x00c8, 0x01c9, 0x01ca, 0x01cb, 0x00cc, 0x01cd, 0x01ce, 0x01cf,
    0x00d0, 0x01d1, 0x01d2, 0x01d3, 0x00d4, 0x01d5, 0x01d6, 0x01d7,
    0x00d8, 0x01d9, 0x01da, 0x01db, 0x00dc, 0x01dd, 0x01de, 0x01df,
    0x00e0, 0x01e1, 0x01e2, 0x01e3, 0x00e4, 0x01e5, 0x01e6, 0x01e7,
    0x00e8, 0x01e9, 0x01ea, 0x01eb, 0x00ec, 0x01ed, 0x01ee, 0x01ef,
    0x00f0, 0x01f1, 0x01f2, 0x01f3, 0x00f4, 0x01f5, 0x01f6, 0x01f7,
    0x00f8, 0x01f9, 0x01fa, 0x01fb, 0x00fc, 0x01fd, 0x01fe, 0x01ff
];